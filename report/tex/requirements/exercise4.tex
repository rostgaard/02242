\section{Exercise 4}
\begin{equation}
  \left(L, \mathcal{F}, F, E, \iota, \mathrm{f}.  \right)
  \label{eq:monotone_framework}
\end{equation}
%TODO: Put this into a table.
\begin{table}
\begin{tabular}{| l | l |}
  \hline
  Instance & $(L,\sqsubseteq,\bigsqcup, \bigsqcap, \top, \bot )$ \\
  \hline
  \hline
  Lattice  & (Interval, $\sqsubseteq$) \\
  \hline
  Interval & $\{\bot\} \bigcup \{[z_1, z_2] | z_1 < z_2, z_1, z_2, \in Z' \bigcup \{- \infty, \infty \} \} $ \\
           & where $Z' = \{ z | \min \leq z \leq \max \}$ and $ - \infty \leq \infty $, and $ \min, \max \in Z$ \\
           \hline
   $\sqsubseteq$-Ordering &  $\subseteq$ (subset ordering).\\
                          & Interval$_1 \sqsubseteq $ Interval$_2 $ if, and only if $\beta($Interval$_1) \subseteq \beta($Interval$_2)$, where \\
                          & $\beta(\bot) = \emptyset$ \\
                          & $\beta([z_1, z_2]) = \{ z \in Z | z_1 \leq z \leq z_2\} $ if $z_1 \in Z' \bigcup \{  -\infty\} $ and $ z_2 \in Z' \bigcup \{\infty\}$ \\
                          & $\beta(\{-\infty, -\infty\}) = \{z | z < \min\}$ \\
                          & $\beta(\{\infty, \infty\}) = \{z | z > \max\}$ \\
   \hline
   Least upper bound      & $\bigsqcup Y = \bigcup Y$\\
   \hline
   Greatest lower bound   & $\bigsqcap Y = \bigcap Y$\\
   \hline
   $\bot$                 & Bottom, least element : $\emptyset$\\
   \hline
   $\top$                 & Top, greatest element : $[-\infty, \infty]$\\
\hline   
\end{tabular}
  \centering
\end{table}

This is a complete lattice, as every subset in the partial ordered set have a least upper bound and a greatest lower bound.\\
It also holds the Ascending Chain Property, because the lattice has a finite height, and will thus, eventually stabilize.\\\\
We define the flow as 
\begin{description}
  \item[Flow $F$:] flow ($S_*$) (forward analysis)
  \item[Extremal label $E$:] \{init($S_*$)\}
\end{description}

The analysis is defined as :
\begin{table}
\begin{tabular}{| l | l |}
  \hline
  Analysis$_\circ(\ell)$ & $ \bigsqcup \{$ Analysis$_\bullet (\ell') | (\ell', \ell) \in F \} \bigcup \iota_E^{\ell} $ \\
                         & where $\iota_E^{\ell} = \begin{cases} \iota & \text{if } \ell \in E \\ 
                                                                 \bot  & \text{if } \ell \notin E
                                                   \end{cases}$\\
  \hline
  Analysis$_\bullet(\ell)$ & f$_\ell$(Analysis$_\circ(\ell)$)\\
  \hline
\end{tabular}
\centering
\caption{Analysis definitions}
\end{table}

\subsection{Transfer functions}
%We define our transfer functions as
\begin{table}
\begin{tabular}{| l | l | l |}
  \hline
  \# & Statement & Function \\
  \hline
  \hline
  1 & [int x]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = \widehat{\sigma}[x \mapsto [0,0]]$ \\
  \hline
  2 & [int A[n]]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = 
     \begin{cases} 
        \widehat{\sigma}[$A[n]$ \mapsto \bot] & \text{if } n \leq 0] \\
        \widehat{\sigma}[$A[i]$ \mapsto [0,0] | \forall i \in \{0, ..., n-1 \} & \text{if } n > 0] \\
     \end{cases}$\\
  \hline
  3 & [x := a]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = \widehat{\sigma}[x \mapsto A_I[\![a]\!] \widehat{\sigma} ]$ \\
  \hline
  4 & [skip]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = \widehat{\sigma}$\\
  \hline
  5 & [b]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = \widehat{\sigma}$\\
  \hline
  6 & [int A[a$_1$] := a$_2$]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = 
     \begin{cases} 
        \widehat{\sigma}[$A[a$_1$]$ \mapsto \bot]        & \text{if } $A$_I[\![a]\!] \subsetneq [0, n-1] \\
        \widehat{\sigma}[$A[a$_1$]$ \mapsto A_I[\![a_2]\!] & \text{if } 0 \leq a_1 < n \\
     \end{cases}$\\
  \hline
  7 & [read x]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = [x \mapsto $A$_I[\![n]\!] \widehat{\sigma})$  \\
  \hline
  8 & [read A[a]]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = 
     \begin{cases} 
        \widehat{\sigma}[$A[a]$ \mapsto \bot]        & \text{if } 0 < a \leq n \\ %TODO ??
        \widehat{\sigma}[$A[a]$ \mapsto A_I[\![n]\!] & \text{if } 0 \leq a_1 < n \\
     \end{cases}$\\
  \hline
  9 & [write A[n]]$^\ell$ & f$_\ell^I (\widehat{\sigma}) = \widehat{\sigma}$\\
  \hline
\end{tabular}
\centering
\end{table}

Where A$_I$ : AExp$ \rightarrow (\widehat{\text{State}_{\text{I}}} \rightarrow \text{Interval})$ determines the interval for the value of an expression.\\\\

$A_I[\![x]\!]\widehat{\sigma} = \widehat{\sigma}(x)$ \\
$A_I[\![n]\!]\widehat{\sigma} = 
     \begin{cases} 
        [n;n] & \text{if } \min \leq n \leq \max \\
        [-\infty;-\infty] & \text{if } n < \min\\
        [\infty;\infty] & \text{if } n > \max\\
     \end{cases}$\\

$A_I[\![a_1 op_a a_2 ]\!] = A_I[\![a_1]\!] \widehat{\text{op}_a} A_I[\![a_1]\!]\sigma $, where $  \widehat{\text{op}_a} : \text{interval} \times \text{interval} \rightarrow $  interval is an abstract operator on intervals.\\
\\
\subsubsection{Addition on intervals}
$[Z_{11},Z_{12}] + [Z_{21},Z_{22}] = [Z_{1},Z_{2}] =
     \begin{cases} 
        Z_{1i} + Z_{2i} & \text{if } \min \leq Z_{1i} + Z_{2i} \leq \max \\
        -\infty         & \text{if } Z_{1i} + Z_{2i} < \min \\
        \infty          & \text{if } Z_{1i} + Z_{2i} > \max\\
     \end{cases}
$

%TODO: Convert operations to lookup tables.

\subsubsection{Subtraction on intervals}
$[Z_{11},Z_{12}] - [Z_{21},Z_{22}] = [Z_{1},Z_{2}] =
     \begin{cases} 
        Z_{1i} + Z_{2i} & \text{if } \min \leq Z_{1i} + Z_{2i} \leq \max \\
        -\infty         & \text{if } Z_{1i} + Z_{2i} < \min \\
        \infty          & \text{if } Z_{1i} + Z_{2i} > \max\\
     \end{cases}
$

\subsection{Algorithm}
\begin{table}
\begin{tabular}{| l | l |}
\hline
A$_\circ (1) = \iota \{\text{init}(S_*) \} $ & A$_\bullet(1) = \text{f}_{\text{int A[2]}} (\text{A}_\circ (1))$ \\
\hline
A$_\circ (2) =$A$_\bullet(1) $ & A$_\bullet(2) = \text{f}_{\text{int i}} (\text{A}_\circ (2))$ \\
\hline
A$_\circ (3) = $A$_\bullet(2)$ & A$_\bullet(3) = \text{f}_{\text{i := -1}} (\text{A}_\circ (3))$  \\
\hline
A$_\circ (4) = $A$_\bullet(3) \bigcup $A$_\bullet(6) $ & A$_\bullet(4) = \text{f}_{\text{i < 3}} (\text{A}_\circ (4))$ \\
\hline
A$_\circ (5) = $A$_\bullet(4)$ & A$_\bullet(5) = \text{f}_{\text{A[i] := i + 1}} (\text{A}_\circ (5))$ \\
\hline
A$_\circ (6) = $A$_\bullet(5)$ & A$_\bullet(6) = \text{f}_{\text{i := i + 1}} (\text{A}_\circ (6))$ \\

\hline
\end{tabular}
\centering
\end{table}